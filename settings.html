<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Settings</title>
    <script src="assets/js/script.js"></script>
    <link href="favicon.png" rel="icon" type="image/x-png">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/bulma/0.7.5/css/bulma.min.css" rel="stylesheet">
    <link href="assets/css/style.css" rel="stylesheet">
</head>

<body>
    <div class="container">
        <nav class="navbar is-fixed-top has-background-white-bis" role="navigation" aria-label="main navigation">
            <div class="navbar-brand">
                <span class="navbar-item is-paddingless">
                    <a class="button is-marginless is-info" id="caloriesButton">
                        <img id="mealIcon" src="assets/images/loading.gif">
                        <span id="caloriesRemaining" style="opacity: 0">----</span>
                    </a>
                </span>
                <a role="button" class="navbar-burger burger" aria-label="menu" aria-expanded="false" data-target="navbar">
                    <span aria-hidden="true"></span>
                    <span aria-hidden="true"></span>
                    <span aria-hidden="true"></span>
                </a>
            </div>
            <div id="navbar" class="navbar-menu">
                <div class="navbar-start">
                    <a href="./" class="navbar-item">
                        Home
                    </a>
                    <a href="history.html" class="navbar-item">
                        History
                    </a>
                    <a href="settings.html" class="navbar-item">
                        Settings
                    </a>
                    <a id="fitbitLoginButton" class="navbar-item is-hidden" href="https://www.fitbit.com/oauth2/authorize
                        ?response_type=token
                        &client_id=22B7BF
                        &redirect_uri=https://redchristian77.github.io/Squirtle-Squad
                        &scope=nutrition
                        &expires_in=604800">
                        Fitbit Login
                    </a>
                    <a id="fitbitLogoutButton" class="navbar-item is-hidden">
                        Fitbit Logout
                    </a>
                </div>
            </div>
        </nav>
        <section class="main-content is-fullheight" id="content">
            <div class="container">
                <div class="section">
                    <div class="card">
                            <div class="card-header has-background-light">
                                <p class="card-header-title">Settings</p>
                            </div>
                        <div class="card-content">
                            <div id="manuel-input">
                                <div class="field">
                                    <label class="label">Name</label>
                                    <div class="control">
                                        <input id="name-input" class="input is-info" type="text" placeholder="Text input">
                                    </div>
                                </div>
        
                                <div class="field">
                                    <label class="label">Calories</label>
                                    <div class="control">
                                        <input id="calorie-input" class="input is-info" type="number" placeholder="Text input"
                                            value="2000">
                                    </div>
                                </div>
        
                                <div class="field">
                                    <div class="control">
                                        <label class="radio">
                                            <input type="radio" name="gender" value="male">
                                            Male
                                        </label>
                                        <label class="radio">
                                            <input type="radio" name="gender" value="female">
                                            Female
                                        </label>
                                    </div>
                                </div>
        
                                <div class="field is-grouped">
                                    <div class="control">
                                        <button class="button is-link" id="submit2">Update</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="table-container">
                        <table class="table is-bordered is-striped is-hoverable is-fullwidth" id="settings-table">
                            <thead>
                                <tr>
                                    <th>Name</th>
                                    <th>Calories</th>
                                    <th>Gender</th>
                                </tr>
                            </thead>
                            <tbody id="table-info">
                                <tr>
                                    <td>John</td>
                                    <td>2100</td>
                                    <td>Male</td>
                                </tr>
                                <tr>
                                    <td>Jill</td>
                                    <td>1900</td>
                                    <td>Female</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </section>
		<div class="modal" id="calorieLogModal">
			<div class="modal-background"></div>
			<div class="modal-card">
				<header class="modal-card-head">
					<p class="modal-card-title">Update calorie log</p>
					<button class="delete clear-form" aria-label="close"></button>
				</header>
				<section class="modal-card-body">
					<div class="field">
						<div class="control">
                            <label>
                                Manually log calories against your Daily Calorie Goal:
                                <input class="input is-info" type="text" placeholder="Calories eaten" id="caloriesEatenInput">
                            </label>
                        </div>
					</div>
				</section>
				<footer class="modal-card-foot">
					<button class="button is-info" id="saveCalorieGoal">Save changes</button>
					<button class="button clear-form">Cancel</button>
				</footer>
			</div>
		</div>
		<div class="modal" id="messageModal">
			<div class="modal-background"></div>
			<div class="modal-content">
				<article class="message is-warning">
					<div class="message-header">
						<p>Warning</p>
						<button class="delete close-modal" aria-label="delete"></button>
					</div>
					<div class="message-body"></div>
					<div class="message-footer">
						<a class="button is-warning close-modal">OK</a>
					</div>
				</article>
			</div>
		</div>
    </div>
</body>

<script>

    document.getElementById("submit2").addEventListener("click", function
        (event) {
        event.preventDefault()

        const name = document.getElementById("name-input").value.trim()
        const calories = document.getElementById("calorie-input").value.trim()
        const gender = document.querySelector('input[name = "gender"]:checked').value;
        console.log(name, calories, gender)

        localStorage.setItem("name", name)
        localStorage.setItem("calories", calories)
        localStorage.setItem("gender", gender)

        const newName = localStorage.getItem("name")
        const newCalories = localStorage.getItem("calories")
        const newGender = localStorage.getItem("gender")

        document.getElementById("table-info").insertAdjacentHTML("beforeend",
            "<tr><td>" + newName + "</td><td>" + newCalories + "</td><td>" + newGender + "</td></tr>")
  
            document.getElementById("name-input").value=""
            document.getElementById("calorie-input").value=""
            
            document.getElementById("caloriesRemaining").textContent = calories;
        
        })


</script>

</html>